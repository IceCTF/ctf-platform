---
layout: default
title: Problems
post_scripts:
 - js/problems.js
startup_functions:
 - redirectIfNotLoggedIn()
---

<script src="/js/libs/star-rating.min.js"></script>
<link href="/css/star-rating.min.css" rel="stylesheet" type="text/css"/>

<script type="text/template" id="problem-list-template">
  <div class="problem-list panel-group">
    <% _.each(problems, function(problem) { %>
      <%= renderProblem({
            problem: problem,
            renderProblemReview: renderProblemReview,
            renderProblemSubmit: renderProblemSubmit
          }) %>
    <% }); %>
  </div>
</script>

<script type="text/template" id="problem-template">
  <%
    var panel = {
      className: problem.solved ? "solved" : "",
      collapseClass: problem.solved ? "" : "in",
      title: problem.name + " - " + problem.score,
      status: problem.solved ? "Solved" : "Unsolved"
    };
    
    var pill = {
      solveId: problem.pid + "solve",
      reviewId: problem.pid + "review",
      solveClassName: problem.solved ? "disabled" : "active",
      reviewClassName: problem.solved ? "active" : ""
    };
  %>

  <div class="problem <%= panel.className %> panel panel-default">
    <div class="problem-header panel-heading" data-toggle="collapse" data-target="#<%- problem.pid %>">
      <h4 class="panel-title">
        <%- panel.title %>
        <div class="pull-right"><%- panel.status %></div>
      </h4>
    </div>

    <div class="panel-collapse collapse <%= panel.collapseClass %>" id="<%= problem.pid %>">
      <div class="problem-body panel-body">
        <ul class="nav nav-tabs">
          <li class="<%= pill.solveClassName %>"><a href="#<%= pill.solveId %>" data-toggle="tab">Solve</a></li>
          <li class="<%= pill.reviewClassName %>"><a href="#<%= pill.reviewId %>" data-toggle="tab">Review</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane <%= pill.solveClassName %>" id="<%= pill.solveId %>">
            <%= renderProblemSubmit({problem: problem}) %>
          </div>
          <div class="tab-pane <%= pill.reviewClassName %>" id="<%= pill.reviewId %>">
            <%= renderProblemReview({problem: problem}) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>

<script type="text/template" id="problem-submit-template">
  <p class="problem-description">
    <%= problem.description %>
    <div class="row">
      <div class="col-md-11">
        <% if(problem.hint) { %>
          <em class="problem-hint pull-left" id="<%= problem.pid %>-hint">
            <strong><h4>Hint:</h4></strong>
            <%= problem.hint %>
          </em>
        <% } %>
      </div>
      <div class="col-md-1">
        <% if(problem.hint) { %>
          <span data-pid="<%= problem.pid %>" class="glyphicon glyphicon-info-sign info-span"></span>
        <% } %>
      </div>
    </div>
  </p>
  <div class="row">
    <form class="problem-submit">
      <div class="input-group input-group-sm">
        <span class="input-group-btn">
          <button class="btn btn-default" type="submit">Submit!</button>
        </span>
        <input type="text" data-pid="<%- problem.pid %>" class="form-control">
      </div>
    </form>
  </div>
</script>


<script type="text/template" id="problem-review-template">
  <div class="well problem-review-holder">
    <div class="row">
      <form class="form-horizontal problem-review-form">
        <h4>Problem Feedback</h4>
        <div class="form-group">
          <div class="col-md-6">
            <% _.each(window.ratingMetrics, function(rating) { %>
              <div class="row">
                <div class="col-md-6">
                  <%- rating %>
                </div>
                <div class="col-md-6">
                    <input name="rating-<%= rating %>" type="number" class="problem-rating">
                </div>
              </div>
            <% }) %>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <textarea name="feedback" class="form-control"></textarea>
            </div>
            <span class="input-group-btn">
              <button class="btn btn-default feedback-button" type="submit">Send Feedback</button>
            </span>
          </div>
        </div>
      </form>
    </div>
  </div>
</script>

<div class="container">
  <div id="problem-list-holder"></div>
</div>
